# This file is subject to the terms and conditions defined in file 'LICENSE',
# which is part of this repository.
#
# DO NOT EDIT THIS FILE BY HAND -- FILE IS SYNCHRONIZED REGULARLY
---
- name: Cleanup XenServer compute nodes
  hosts: compute
  tasks: 
    # NOTE: The neutron-openvswitch-agent on a XenServer compute nodes communicates
    #       with the Open vSwitch/XenAPI on the XenServer.
    #
    #       This will be removed in the future.
    - name: Remove openvswitch containers
      docker_container:
        name: "{{ item }}"
        state: absent
      with_items:
        - openvswitch_vswitchd
        - openvswitch_db

    - name: Remove openvswitch volume
      command: docker volume rm -f openvswitch_db
