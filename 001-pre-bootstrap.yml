# This file is subject to the terms and conditions defined in file 'LICENSE',
# which is part of this repository.
#
# DO NOT EDIT THIS FILE BY HAND -- FILE IS SYNCHRONIZED REGULARLY
---
- name: Install python version 2
  hosts: seed

  # NOTE: This is disabled because python binary is required to gather facts
  gather_facts: no

  tasks:

  # NOTE: Because fact gathering is disabled it is required to manually set ansible_os_family
  - name: Include distribution specific tasks
    include: "tasks/001-{{ ansible_os_family }}.yml"

- name: Make ssh pipelining working
  hosts: all:!xenserver
  vars:
    ansible_ssh_pipelining: no

  tasks:
  - name: Do not require tty for all users
    replace:
      # NOTE: parameter changes to path after 2.3
      dest: /etc/sudoers
      regexp: "^Defaults.*requiretty$"
      replace: "Defaults !requiretty"
    become: true

- name: Gather facts from all nodes
  hosts: all
  tasks: []
