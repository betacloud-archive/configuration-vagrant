# This file is subject to the terms and conditions defined in file 'LICENSE',
# which is part of this repository.
#
# DO NOT EDIT THIS FILE BY HAND -- FILE IS SYNCHRONIZED REGULARLY
---
- name: Gather facts from all nodes
  hosts: all
  tasks: []

- name: Get configuration
  hosts: seed:!vagrant

  pre_tasks:
  - name: Include secrets
    include_vars: secrets.yml

  roles:
  - role: betacloud.configuration

- name: Bootstrap the seed node
  hosts: seed

  pre_tasks:
  - name: Include secrets
    include_vars: secrets.yml
    tags:
      - ceph
      - kolla

  roles:
  - role: betacloud.kolla

- name: Apply role betacloud.docker-cobbler
  hosts: seed

  roles:
  - role: betacloud.docker-cobbler
    when: betacloud_cobbler|bool
    tags: cobbler
